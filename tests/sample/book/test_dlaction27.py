from datetime import date
from unittest.case import TestCase

from mugimugi.entity.book import Book, Linker
from mugimugi.entity.item import (
    LinkedPartialAuthor,
    LinkedPartialCharacter,
    LinkedPartialCircle,
    LinkedPartialCollection,
    LinkedPartialContent,
    LinkedPartialConvention,
    LinkedPartialGenre,
    LinkedPartialImprint,
    LinkedPartialParody,
    LinkedPartialPublisher,
    LinkedPartialType,
)
from mugimugi.enum import Language, Position, Ratio, Sex

from ...configuration import SAMPLE
from ..sample import Sample


class TestBookDLAction27(Sample, TestCase):
    file_path = SAMPLE / "book/dlaction27.xml"
    type = Book
    object = Book(
        english_name="D.L. action 27",
        japanese_name="D.L. action 27",
        romaji_name="ディーエルアクション27",
        other_names=[],
        _id="B65715",
        version=6,
        match_ratio=None,
        release_date=date(2004, 10, 3),
        isbn="",
        pages_count=28,
        is_adult=True,
        is_anthology=False,
        is_copybook=False,
        magazine=0,
        language=Language.JAPANESE,
        info="",
        _links=Linker(
            items=[
                LinkedPartialGenre(
                    english_name="For men",
                    japanese_name="男性向け",
                    romaji_name="",
                    other_names=[],
                    _id="G227",
                    version=1,
                    objects_count=346049,
                    ratio=Ratio.NOT_SET,
                ),
                LinkedPartialConvention(
                    english_name="Comic Revolution 36",
                    japanese_name="コミックレヴォリューション 36",
                    romaji_name="コミックレヴォリューション36",
                    other_names=[],
                    _id="N107",
                    version=2,
                    objects_count=696,
                    date_start=date(2004, 10, 3),
                    date_end=date(2004, 10, 3),
                ),
                LinkedPartialPublisher(
                    english_name="No Publisher",
                    japanese_name="出版社なし",
                    romaji_name="",
                    other_names=[],
                    _id="L3",
                    version=2,
                    objects_count=1492741,
                ),
                LinkedPartialCollection(
                    english_name="D.L. action",
                    japanese_name="D.L. action",
                    romaji_name="",
                    other_names=[],
                    _id="O25",
                    version=1,
                    objects_count=109,
                ),
                LinkedPartialImprint(
                    english_name="No Imprint",
                    japanese_name="レーベルなし",
                    romaji_name="",
                    other_names=[],
                    _id="I2",
                    version=2,
                    objects_count=848115,
                ),
                LinkedPartialType(
                    english_name="Doujinshi",
                    japanese_name="同人誌",
                    romaji_name="",
                    other_names=[],
                    _id="T1",
                    version=1,
                    objects_count=1329929,
                ),
                LinkedPartialCircle(
                    english_name="Digital Lover",
                    japanese_name="Digital Lover",
                    romaji_name="デジタルラバー",
                    other_names=[],
                    _id="C180",
                    version=17,
                    objects_count=421,
                    parent=0,
                    position=Position.MAIN,
                ),
                LinkedPartialAuthor(
                    english_name="Nakajima Yuka",
                    japanese_name="なかじまゆか",
                    romaji_name="ナカジマユカ",
                    other_names=["かなじまゆか", "Digital Lover"],
                    _id="A924",
                    version=15,
                    objects_count=485,
                    parent=0,
                    position=Position.MAIN,
                ),
                LinkedPartialParody(
                    english_name="Fate/stay night",
                    japanese_name="Fate/stay night",
                    romaji_name="フェイトステイナイト",
                    other_names=[],
                    _id="P16",
                    version=29,
                    objects_count=5268,
                    ratio=Ratio.NOT_SET,
                ),
                LinkedPartialCharacter(
                    english_name="Caster",
                    japanese_name="キャスター",
                    romaji_name="キャスター",
                    other_names=[],
                    _id="H3465",
                    version=13,
                    objects_count=125,
                    sex=Sex.FEMALE,
                    age="",
                    ratio=Ratio.NOT_SET,
                ),
                LinkedPartialContent(
                    english_name="Domination (Femdom)",
                    japanese_name="女性支配・女王様・ドミナ",
                    romaji_name="",
                    other_names=[],
                    _id="K48",
                    version=2,
                    objects_count=7083,
                    ratio=Ratio.NOT_SET,
                ),
                LinkedPartialContent(
                    english_name="Elf",
                    japanese_name="エルフ",
                    romaji_name="",
                    other_names=[],
                    _id="K39",
                    version=1,
                    objects_count=2803,
                    ratio=Ratio.NOT_SET,
                ),
                LinkedPartialContent(
                    english_name="Group Sex",
                    japanese_name="グループセックス",
                    romaji_name="",
                    other_names=["乱交"],
                    _id="K66",
                    version=4,
                    objects_count=39263,
                    ratio=Ratio.NOT_SET,
                ),
                LinkedPartialCharacter(
                    english_name="Tōsaka Rin",
                    japanese_name="遠坂凛",
                    romaji_name="トオサカリン",
                    other_names=["Tosaka Rin", "Tousaka Rin", "Tohsaka Rin"],
                    _id="H211",
                    version=19,
                    objects_count=979,
                    sex=Sex.FEMALE,
                    age="",
                    ratio=Ratio.NOT_SET,
                ),
            ]
        ),
    )
